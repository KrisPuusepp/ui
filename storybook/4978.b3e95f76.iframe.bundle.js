"use strict";(self.webpackChunk_pixi_ui=self.webpackChunk_pixi_ui||[]).push([[4978],{"./node_modules/@pixi/text-html/lib/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>HTMLText});var lib=__webpack_require__("./node_modules/@pixi/core/lib/index.mjs"),sprite_lib=__webpack_require__("./node_modules/@pixi/sprite/lib/index.mjs"),text_lib=__webpack_require__("./node_modules/@pixi/text/lib/index.mjs");const _HTMLTextStyle=class _HTMLTextStyle2 extends text_lib.pn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(originalStyle){return new _HTMLTextStyle2(Object.keys(_HTMLTextStyle2.defaultOptions).reduce(((obj,prop)=>({...obj,[prop]:originalStyle[prop]})),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach((font=>{URL.revokeObjectURL(font.src),font.refs--,0===font.refs&&(font.fontFace&&document.fonts.delete(font.fontFace),delete _HTMLTextStyle2.availableFonts[font.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(url,options={}){const{availableFonts}=_HTMLTextStyle2;if(availableFonts[url]){const font=availableFonts[url];return this._fonts.push(font),font.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return lib.Xd.ADAPTER.fetch(url).then((response=>response.blob())).then((async blob=>new Promise(((resolve,reject)=>{const src=URL.createObjectURL(blob),reader=new FileReader;reader.onload=()=>resolve([src,reader.result]),reader.onerror=reject,reader.readAsDataURL(blob)})))).then((async([src,dataSrc])=>{const font=Object.assign({family:lib.P6.path.basename(url,lib.P6.path.extname(url)),weight:"normal",style:"normal",display:"auto",src,dataSrc,refs:1,originalUrl:url,fontFace:null},options);availableFonts[url]=font,this._fonts.push(font),this.styleID++;const fontFace=new FontFace(font.family,`url(${font.src})`,{weight:font.weight,style:font.style,display:font.display});font.fontFace=fontFace,await fontFace.load(),document.fonts.add(fontFace),await document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...value){const toAdd=value.filter((v=>!this._overrides.includes(v)));toAdd.length>0&&(this._overrides.push(...toAdd),this.styleID++)}removeOverride(...value){const toRemove=value.filter((v=>this._overrides.includes(v)));toRemove.length>0&&(this._overrides=this._overrides.filter((v=>!toRemove.includes(v))),this.styleID++)}toCSS(scale){return[`transform: scale(${scale})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce(((result,font)=>`${result}\n            @font-face {\n                font-family: "${font.family}";\n                src: url('${font.dataSrc}');\n                font-weight: ${font.weight};\n                font-style: ${font.style};\n                font-display: ${font.display};\n            }`),this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(value){this._stylesheet!==value&&(this._stylesheet=value,this.styleID++)}normalizeColor(color){return Array.isArray(color)&&(color=lib.P6.rgb2hex(color)),"number"==typeof color?lib.P6.hex2string(color):color}dropShadowToCSS(){let color=this.normalizeColor(this.dropShadowColor);const alpha=this.dropShadowAlpha,x=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),y=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);color.startsWith("#")&&alpha<1&&(color+=(255*alpha|0).toString(16).padStart(2,"0"));const position=`${x}px ${y}px`;return this.dropShadowBlur>0?`text-shadow: ${position} ${this.dropShadowBlur}px ${color}`:`text-shadow: ${position} ${color}`}reset(){Object.assign(this,_HTMLTextStyle2.defaultOptions)}onBeforeDraw(){const{fontsDirty:prevFontsDirty}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&prevFontsDirty?new Promise((resolve=>setTimeout(resolve,100))):Promise.resolve()}get isSafari(){const{userAgent}=lib.Xd.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(userAgent)}set fillGradientStops(_value){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_value){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_value){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_value){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_value){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_value){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_value){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class _HTMLText2 extends sprite_lib.j{constructor(text="",style={}){super(lib.xE.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const image=new Image,texture=lib.xE.from(image,{scaleMode:lib.Xd.SCALE_MODE,resourceOptions:{autoLoad:!1}});texture.orig=new lib.Ae,texture.trim=new lib.Ae,this.texture=texture;const nssvg="http://www.w3.org/2000/svg",nsxhtml="http://www.w3.org/1999/xhtml",svgRoot=document.createElementNS(nssvg,"svg"),foreignObject=document.createElementNS(nssvg,"foreignObject"),domElement=document.createElementNS(nsxhtml,"div"),styleElement=document.createElementNS(nsxhtml,"style");foreignObject.setAttribute("width","10000"),foreignObject.setAttribute("height","10000"),foreignObject.style.overflow="hidden",svgRoot.appendChild(foreignObject),this.maxWidth=_HTMLText2.defaultMaxWidth,this.maxHeight=_HTMLText2.defaultMaxHeight,this._domElement=domElement,this._styleElement=styleElement,this._svgRoot=svgRoot,this._foreignObject=foreignObject,this._foreignObject.appendChild(styleElement),this._foreignObject.appendChild(domElement),this._image=image,this._loadImage=new Image,this._autoResolution=_HTMLText2.defaultAutoResolution,this._resolution=_HTMLText2.defaultResolution??lib.Xd.RESOLUTION,this.text=text,this.style=style}measureText(overrides){const{text,style,resolution}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},overrides);Object.assign(this._domElement,{innerHTML:text,style:style.toCSS(resolution)}),this._styleElement.textContent=style.toGlobalCSS(),document.body.appendChild(this._svgRoot);const contentBounds=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width,height}=contentBounds;(width>this.maxWidth||height>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const contentWidth=Math.min(this.maxWidth,Math.ceil(width)),contentHeight=Math.min(this.maxHeight,Math.ceil(height));return this._svgRoot.setAttribute("width",contentWidth.toString()),this._svgRoot.setAttribute("height",contentHeight.toString()),text!==this._text&&(this._domElement.innerHTML=this._text),style!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(resolution)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:contentWidth+2*style.padding,height:contentHeight+2*style.padding}}async updateText(respectDirty=!0){const{style,_image:image,_loadImage:loadImage}=this;if(this.localStyleID!==style.styleID&&(this.dirty=!0,this.localStyleID=style.styleID),!this.dirty&&respectDirty)return;const{width,height}=this.measureText();image.width=loadImage.width=Math.ceil(Math.max(1,width)),image.height=loadImage.height=Math.ceil(Math.max(1,height)),this._updateID++;const updateID=this._updateID;await new Promise((resolve=>{loadImage.onload=async()=>{updateID<this._updateID||(await style.onBeforeDraw(),image.src=loadImage.src,loadImage.onload=null,loadImage.src="",this.updateTexture()),resolve()};const svgURL=(new XMLSerializer).serializeToString(this._svgRoot);loadImage.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(svgURL)}`}))}get source(){return this._image}updateTexture(){const{style,texture,_image:image,resolution}=this,{padding}=style,{baseTexture}=texture;texture.trim.width=texture._frame.width=image.width/resolution,texture.trim.height=texture._frame.height=image.height/resolution,texture.trim.x=-padding,texture.trim.y=-padding,texture.orig.width=texture._frame.width-2*padding,texture.orig.height=texture._frame.height-2*padding,this._onTextureUpdate(),baseTexture.setRealSize(image.width,image.height,resolution),this.dirty=!1}_render(renderer){this._autoResolution&&this._resolution!==renderer.resolution&&(this._resolution=renderer.resolution,this.dirty=!0),this.updateText(!0),super._render(renderer)}_renderCanvas(renderer){this._autoResolution&&this._resolution!==renderer.resolution&&(this._resolution=renderer.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(renderer)}getLocalBounds(rect){return this.updateText(!0),super.getLocalBounds(rect)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(options){"boolean"==typeof options&&(options={children:options}),options=Object.assign({},_HTMLText2.defaultDestroyOptions,options),super.destroy(options);this.ownsStyle&&this._style?.cleanFonts(),this._style=null,this._svgRoot?.remove(),this._svgRoot=null,this._domElement?.remove(),this._domElement=null,this._foreignObject?.remove(),this._foreignObject=null,this._styleElement?.remove(),this._styleElement=null,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=null,this._image.src="",this._image=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(value){this.updateText(!0);const s=lib.P6.sign(this.scale.x)||1;this.scale.x=s*value/this._image.width/this.resolution,this._width=value}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(value){this.updateText(!0);const s=lib.P6.sign(this.scale.y)||1;this.scale.y=s*value/this._image.height/this.resolution,this._height=value}get style(){return this._style}set style(style){this._style!==style&&((style=style||{})instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=style):style instanceof text_lib.pn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(style)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(style)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(text){text=String(""===text||null==text?" ":text),text=this.sanitiseText(text),this._text!==text&&(this._text=text,this.dirty=!0)}get resolution(){return this._resolution}set resolution(value){this._autoResolution=!1,this._resolution!==value&&(this._resolution=value,this.dirty=!0)}sanitiseText(text){return text.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;let HTMLText=_HTMLText},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_AY7I2SME.aD});var chunk_AY7I2SME=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs")}}]);